<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- ====== Stylesheet ====== -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- ======= Script ======= -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/1ddae515d7.js"></script>
</head>
<style>
    .card {
        border: none;
    }
    table, td {
        border: solid 1px #000000;
    }
    .lazy-bg-size {
        background-repeat: no-repeat;
        background-position: top center;
        background-size: 100% 100%;
        width: 100%;
        height: 100%;
    }
    .no-warping h1, .no-warping h2, .no-warping h3, .no-warping h4, .no-warping h5, .no-warping h6, .no-warping p {
        margin-bottom: 0em;
    }
    .no-warping p {
        font-size: .8em;
    }
    .card-img-overlay {
        bottom: 35%;
        margin: 0;
        padding: 2px;
    }
    .card-img-overlay p {
        margin-bottom: 0;
    }
    .normal-state {
        background-color: #808080bf;
    }
    .danger-state {
        background-color: #f44336bf;
    }
    .setting {
        margin: 50px 100px;
    }
</style>
<body style="overflow-x: hidden">
    <div class="container-fluid">
        <!-- Start Grid -->
        <div class="row" id="div-status">
        </div>
        <!-- Grid End -->
    </div>
    <div class="setting">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <label class="input-group-text" for="listgrid">จำนวนที่แสดง</label>
            </div>
            <select name="list" class="custom-select" id="listgrid" onchange="listTable(this.value)">
                <option value="2,2">4</option>
                <option value="2,4">8</option>
                <option value="3,4">12</option>
                <option value="4,4">16</option>
                <option value="4,6">24</option>
                <option value="6,6">36</option>
                <option value="6,8">48</option>
                <option value="8,8">64</option>
                <option value="6,12" selected>72</option>
                <option value="12,12">144(Unstyled)</option>
            </select>
            <div class="input-group-prepend">
                <label class="input-group-text" for="listgrid">จอ</label>
            </div>
        </div>
    </div>
    <script>
        obj = [{"dept_id":null,"camera_id":"09","dept_pims_id":"10005","dept_name":"ชลบุรี จุดที่ 1 ขาเข้า","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"20/07/2562","dept_last_datetime":"20/07/2562 15:00:29","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"10","dept_pims_id":"10005","dept_name":"ชลบุรี จุดที่ 2 ขาออก","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"20/07/2562","dept_last_datetime":"20/07/2562 15:00:59","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"11","dept_pims_id":"10006","dept_name":"ถนน 304 จุดที่ 1","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:42:52","total":"2777","remark":"","crr_dept_id":null,"image_bg":"img/10006/25620822/11_100061902057648_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"12","dept_pims_id":"10006","dept_name":"ถนน 304 จุดที่ 2","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:42:39","total":"2258","remark":"","crr_dept_id":null,"image_bg":"img/10006/25620822/12_100061902057646_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"19","dept_pims_id":"10010","dept_name":"สภ.บางปะกง จุดที่ 1","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:43:06","total":"2912","remark":"","crr_dept_id":null,"image_bg":"img/10010/25620822/19_10010191904508638_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"20","dept_pims_id":"10010","dept_name":"สภ.บางปะกง จุดที่ 2 ","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:43:12","total":"3326","remark":"","crr_dept_id":null,"image_bg":"img/10010/25620822/20_10010192004508642_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"23","dept_pims_id":"10010","dept_name":"สภ.บางปะกง จุดที่ 3","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:43:35","total":"2465","remark":"","crr_dept_id":null,"image_bg":"img/10010/25620822/23_10010192304508645_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"24","dept_pims_id":"10010","dept_name":"สภ.บางปะกง จุดที่ 4","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:43:24","total":"683","remark":"","crr_dept_id":null,"image_bg":"img/10010/25620822/24_100101904508644_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"25","dept_pims_id":"10010","dept_name":"สภ.บางปะกง จุดที่ 5","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:43:30","total":"1686","remark":"","crr_dept_id":null,"image_bg":"img/10010/25620822/25_100101904508650_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"26","dept_pims_id":"10012","dept_name":"นครปฐม จุดที่ 1","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"20/08/2562","dept_last_datetime":"20/08/2562 08:15:04","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"27","dept_pims_id":"10012","dept_name":"นครปฐม จุดที่ 2","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"20/08/2562","dept_last_datetime":"20/08/2562 23:59:53","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"28","dept_pims_id":"10012","dept_name":"นครปฐม จุดที่ 3","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:19:19","total":"4406","remark":"","crr_dept_id":null,"image_bg":"img/10012/20190822/28_1001231900312937_2.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"29","dept_pims_id":"10012","dept_name":"นครปฐม จุดที่ 4","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:19:11","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/10012/20190822/29_1001241901844579_2.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"43","dept_pims_id":"10012","dept_name":"นครปฐม จุดที่ 5","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"20/08/2562","dept_last_datetime":"20/08/2562 08:47:50","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"44","dept_pims_id":"10012","dept_name":"นครปฐม จุดที่ 6","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:40:48","total":"1362","remark":"","crr_dept_id":null,"image_bg":"img/10012/20190822/44_1001231900312882_2.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"32","dept_pims_id":"10014","dept_name":"ทางด่วนบูรพาวิถี จุดที่ 1","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:44:17","total":"1866","remark":"","crr_dept_id":null,"image_bg":"img/10014/25620822/32_100141901035770_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"33","dept_pims_id":"10014","dept_name":"ทางด่วนบูรพาวิถี จุดที่ 2","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:44:43","total":"845","remark":"","crr_dept_id":null,"image_bg":"img/10014/25620822/33_100141901035772_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"36","dept_pims_id":"10015","dept_name":"อุตรดิตถ์ จุดที่ 1","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:44:57","total":"504","remark":"","crr_dept_id":null,"image_bg":"img/10015/25620822/36_100151900366392_1.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"37","dept_pims_id":"10015","dept_name":"อุตรดิตถ์ จุดที่ 2","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:43:47","total":"455","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"38","dept_pims_id":"10016","dept_name":"สภ.บางปะกง กม.35","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"01/07/2562","dept_last_datetime":"01/07/2562 11:46:26","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"39","dept_pims_id":"10017","dept_name":"บางนา กม.21 จุดที่ 1","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"OK","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 13:42:03","total":"11426","remark":"","crr_dept_id":null,"image_bg":"img/10017/20190822/39_1001721901152419_2.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"40","dept_pims_id":"10017","dept_name":"บางนา กม.21 จุดที่ 2","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"21/08/2562","dept_last_datetime":"21/08/2562 20:09:21","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"46","dept_pims_id":"10017","dept_name":"บางนา กม.21 จุดที่ 3 (จับความเร็ว)","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"21/08/2562","dept_last_datetime":"21/08/2562 20:09:23","total":"0","remark":"","crr_dept_id":null,"image_bg":"img/cam-lost.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"41","dept_pims_id":"10018","dept_name":"ตาก จุดที่ 1","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 09:58:49","total":"436","remark":"","crr_dept_id":null,"image_bg":"img/10018/20190822/41_1001811900058681_2.jpg","remark_order":"","remark_img":"","remark_warning":""},
        {"dept_id":null,"camera_id":"42","dept_pims_id":"10018","dept_name":"ตาก จุดที่ 2","dept_approve":null,"accuse_code":null,"accuse_name":null,"dept_webservice":null,"dept_status":"Lost","dept_last_date":"22/08/2562","dept_last_datetime":"22/08/2562 10:00:07","total":"476","remark":"","crr_dept_id":null,"image_bg":"img/10018/20190822/42_1001821900060483_2.jpg","remark_order":"","remark_img":"","remark_warning":""}];

        function listTable(v) {
            let tbody = '<table style="width: 100%"><tbody>';
            let p = 0;
            let d = 0;
            let c = v;
            let lop;
            c = c.split(',');

            if (c[0]*c[1] < obj.length) {
                lop = obj.length;
            } else {
                lop = c[0];
            }
            console.log(lop);

            while (p < lop) {
                tbody += '<tr>';
                for (let i=0; i<c[1]; i++) {
                    tbody += '<td style="width: '+100/c[1]+'%; height: '+100/c[0]+'vh"><div class="card" style="height: 100%">';
                    if (d < obj.length) {
                        tbody += '<div class="card-img-top lazy-bg-size" style="background-image: url(cctv/1.png)">'
                            +'</div>'
                            +'<div class="no-warping card-img-overlay normal-state text-white">'
                            +'<p class="card-text">'+obj[d].dept_name+'</p>'
                            +'<p class="card-text">'+obj[d].dept_last_datetime+'</p>'
                            +'<h4 style="font-size: '+100/c[0]+'px">'+obj[d].total+' <small>คัน</small>'
                            +'<a href="javascript:;" data-toggle="modal" data-target="#my_10" title="View Info">'
                            +'<i class="fas fa-car" style="color: #ff0000;"></i> </a></h4>'
                            +'';
                    } else {
                        tbody += '<div class="card-img-top lazy-bg-size" style="background-image: url(cctv/empty.png)">';
                            +'</div></div></div>';
                    }
                    tbody += '</td>';
                    d++;
                    if (lop == obj.length) {
                        p++;
                        console.log('1');
                    }
                }
                if (lop == c[0]) {
                    p++;
                    console.log('2');
                }
                tbody += '</tr>';
            }
            tbody += '</tbody></table>';

            document.getElementById('div-status').innerHTML = tbody;
        }

		function listGrid(v) {
            var c = '';
            var height = 0;
            var pfz = 0;
            var hfz = 0;
            switch (parseInt(v)) {
                case 1:
                    height = 16;
                    pfz = 0.7;
                    hfz = 1;
                    break;
                case 2:
                    height = 25;
                    pfz = 0.8;
                    hfz = 2;
                    break;
                case 4:
                    height = 33;
                    pfz = 1;
                    hfz = 3;
                    break;
                case 6:
                    height = 50;
                    pfz = 2;
                    hfz = 5;
                    break;
            }
            for (let i=0; i<obj.length; i++) {
                c += '<div class="col-xl-'+v+' col-md-6" style="padding: 3px 1px 3px 1px; height: '+height+'vh">'
                    +'<div class="card" style="height: 100%">';

                if (obj[i].dept_status = "Lost") {
                    c += '<div class="card-img-top lazy-bg-size" style="background-image: url(cctv/cam-lost.jpg)"></div>'
                        + '<div class="no-warping card-img-overlay danger-state text-white">';
                } else if (obj[i].dept_status = "OK") {
                    c += '<div class="card-img-top lazy-bg-size" style="background-image: url(cctv/cam-lost.jpg)"></div>'
                        +'<div class="no-warping card-img-overlay normal-state text-white">';
                }

                c += '<p class="card-text" style="font-size: '+pfz+'em">'+obj[i].dept_name+'</p>'
                    +'<p class="card-text" style="font-size: '+pfz+'em">'+obj[i].dept_last_datetime+'</p>'
                    +'<h4 class="title" style="font-size: '+hfz+'em">'+obj[i].total+' คัน'
                    +'<a href="javascript:;" data-toggle="modal" data-target="#my_10" title="View Info">'
                    +'<i class="fas fa-car" style="color: #ff0000;"></i> </a></h4>'
                    +'</div></div></div>';
            }
            document.getElementById('div-status').innerHTML = c;
		}
	</script>
</body>
</html>
